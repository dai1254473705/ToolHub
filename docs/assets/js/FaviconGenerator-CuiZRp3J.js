import{i as e}from"./rolldown-runtime-tH7qxucP.js";import{E as a,L as t,O as s,R as r,W as o,l as n,m as l,n as i,o as c,p as d,r as m,t as x}from"./antd-_Zl8gVdI.js";import{E as g,T as h}from"./react-BimuKvkN.js";import{o as u}from"./vendor-ClqHxgW3.js";var f=e(o()),j=e(h()),{Title:p,Text:v}=m,{Dragger:N}=x,y=["image/png","image/jpeg","image/gif","image/x-icon"],G=[16,32,48,64,128,256],b=()=>{const{t:e}=g(),[o,m]=(0,f.useState)(!1),[h,b]=(0,f.useState)({}),[w,C]=(0,f.useState)([]),k=(0,f.useRef)(null),E=e=>{if(!h[e])return;const a=document.createElement("a");a.href=h[e],a.download=`favicon-${e}x${e}.png`,document.body.appendChild(a),a.click(),document.body.removeChild(a)},R=()=>{C([]),b({})},L={name:"image",multiple:!1,beforeUpload:a=>{if(!y.includes(a.type))return d.error(e("tools.faviconGenerator.messages.invalidFormat")),x.LIST_IGNORE;const t=new FileReader;return t.readAsDataURL(a),t.onload=e=>{const t={uid:a.uid,name:a.name,status:"done",url:e.target?.result,originFileObj:a};C([t]),b({})},!1},onChange:({fileList:e})=>{C(e)},fileList:w,onRemove:()=>(R(),!0),showUploadList:!1,accept:y.join(",")};return(0,j.jsxs)("div",{className:"page-transition",children:[(0,j.jsx)(p,{level:2,children:e("tools.faviconGenerator.title")}),(0,j.jsx)("div",{className:"text-gray-500 mb-6",children:e("tools.faviconGenerator.subtitle")}),(0,j.jsxs)(n,{gutter:[16,16],children:[(0,j.jsx)(a,{xs:24,lg:12,children:(0,j.jsxs)(s,{title:e("tools.faviconGenerator.upload.title"),className:"h-full",children:[0===w.length?(0,j.jsxs)(N,{...L,children:[(0,j.jsx)("p",{className:"ant-upload-drag-icon",children:(0,j.jsx)(u,{})}),(0,j.jsx)("p",{className:"ant-upload-text",children:e("tools.faviconGenerator.upload.dragText")}),(0,j.jsx)("p",{className:"ant-upload-hint",children:e("tools.faviconGenerator.upload.hint")})]}):(0,j.jsx)("div",{className:"relative",children:(0,j.jsxs)("div",{className:"flex flex-col items-center justify-center p-4",children:[(0,j.jsx)("img",{src:w[0].url||void 0,alt:e("tools.faviconGenerator.upload.preview"),className:"max-w-full max-h-[250px] object-contain rounded border border-gray-200"}),(0,j.jsx)(v,{className:"mt-2 text-gray-600",children:w[0].name}),(0,j.jsx)(r,{type:"text",danger:!0,icon:(0,j.jsx)(c,{}),onClick:R,className:"mt-1",children:e("tools.faviconGenerator.upload.remove")})]})}),(0,j.jsx)("div",{className:"mt-4 text-center",children:(0,j.jsx)(r,{type:"primary",onClick:()=>{if(0===w.length||!k.current)return void d.warning(e("tools.faviconGenerator.messages.uploadFirst"));m(!0);const a=k.current,t=a.getContext("2d");if(!t)return void m(!1);const s=w[0],r=new Image;r.onload=()=>{const s={};G.forEach(e=>{if(a.width=e,a.height=e,!document.createElement("canvas").getContext("2d"))return;const o=Math.min(r.width,r.height),n=(r.width-o)/2,l=(r.height-o)/2;t.clearRect(0,0,e,e),t.drawImage(r,n,l,o,o,0,0,e,e),s[e]=a.toDataURL("image/png")}),b(s),m(!1),d.success(e("tools.faviconGenerator.messages.success"))},r.onerror=()=>{m(!1),d.error(e("tools.faviconGenerator.messages.loadError"))},r.src=s.url||""},loading:o,disabled:0===w.length,children:e("tools.faviconGenerator.upload.generate")})})]})}),(0,j.jsx)(a,{xs:24,lg:12,children:(0,j.jsx)(s,{title:e("tools.faviconGenerator.generated.title"),className:"h-full",children:o?(0,j.jsxs)("div",{className:"flex items-center justify-center h-80",children:[(0,j.jsx)(l,{}),(0,j.jsx)(v,{className:"ml-2",children:e("tools.faviconGenerator.generated.loading")})]}):Object.keys(h).length>0?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"grid grid-cols-3 gap-4 mb-4",children:G.map(a=>(0,j.jsxs)("div",{className:"text-center",children:[(0,j.jsx)("img",{src:h[a]||void 0,alt:`${a}x${a}`,className:"border border-gray-300 rounded mx-auto",width:2*a,height:2*a}),(0,j.jsxs)(v,{className:"block mt-1",children:[a,"Ã—",a]}),(0,j.jsx)(r,{size:"small",icon:(0,j.jsx)(i,{}),className:"mt-1",onClick:()=>E(a),children:e("tools.faviconGenerator.generated.download")})]},a))}),(0,j.jsx)("div",{className:"text-center",children:(0,j.jsx)(r,{type:"primary",onClick:()=>{0!==Object.keys(h).length&&(d.info(e("tools.faviconGenerator.messages.downloadStart")),G.forEach(e=>{setTimeout(()=>E(e),100*G.indexOf(e))}))},children:e("tools.faviconGenerator.generated.downloadAll")})})]}):(0,j.jsx)("div",{className:"flex flex-col items-center justify-center h-80",children:(0,j.jsx)(t,{description:e("tools.faviconGenerator.generated.empty")})})})})]}),(0,j.jsx)("canvas",{ref:k,style:{display:"none"}})]})};export{b as default};