import{r as e}from"./rolldown-runtime-Dyt8byMj.js";import{E as s,G as a,M as t,N as n,h as r,m as i,n as l,o as c,s as d,u as o,w as m}from"./react-BUTozKD7.js";import{E as x,T as h,a as j}from"./vendor-D1kXU7B4.js";var g=e(a()),u=e(l()),{Title:f,Text:p}=d,{Dragger:v}=c,N=["image/png","image/jpeg","image/gif","image/x-icon"],y=[16,32,48,64,128,256],b=()=>{const[e,a]=(0,g.useState)(!1),[l,d]=(0,g.useState)({}),[b,w]=(0,g.useState)([]),C=(0,g.useRef)(null),G=e=>{if(!l[e])return;const s=document.createElement("a");s.href=l[e],s.download=`favicon-${e}x${e}.png`,document.body.appendChild(s),s.click(),document.body.removeChild(s)},E=()=>{w([]),d({})},k={name:"image",multiple:!1,beforeUpload:e=>{if(!N.includes(e.type))return i.error("只支持PNG、JPG、JPEG、GIF和ICO格式的图片！"),c.LIST_IGNORE;const s=new FileReader;return s.readAsDataURL(e),s.onload=s=>{const a={uid:e.uid,name:e.name,status:"done",url:s.target?.result,originFileObj:e};w([a]),d({})},!1},onChange:({fileList:e})=>{w(e)},fileList:b,onRemove:()=>(E(),!0),showUploadList:!1,accept:N.join(",")};return(0,u.jsxs)("div",{className:"page-transition",children:[(0,u.jsx)(f,{level:2,children:"Favicon 生成器"}),(0,u.jsx)("div",{className:"text-gray-500 mb-6",children:"拖拽上传图片，一键生成不同尺寸的favicon图标"}),(0,u.jsxs)(o,{gutter:[16,16],children:[(0,u.jsx)(m,{xs:24,lg:12,children:(0,u.jsxs)(s,{title:"图片上传",className:"h-full",children:[0===b.length?(0,u.jsxs)(v,{...k,children:[(0,u.jsx)("p",{className:"ant-upload-drag-icon",children:(0,u.jsx)(j,{})}),(0,u.jsx)("p",{className:"ant-upload-text",children:"点击或拖拽图片到此处上传"}),(0,u.jsx)("p",{className:"ant-upload-hint",children:"支持PNG、JPG、JPEG、GIF和ICO格式的图片文件"})]}):(0,u.jsx)("div",{className:"relative",children:(0,u.jsxs)("div",{className:"flex flex-col items-center justify-center p-4",children:[(0,u.jsx)("img",{src:b[0].url||void 0,alt:"预览图",className:"max-w-full max-h-[250px] object-contain rounded border border-gray-200"}),(0,u.jsx)(p,{className:"mt-2 text-gray-600",children:b[0].name}),(0,u.jsx)(n,{type:"text",danger:!0,icon:(0,u.jsx)(x,{}),onClick:E,className:"mt-1",children:"移除图片"})]})}),(0,u.jsx)("div",{className:"mt-4 text-center",children:(0,u.jsx)(n,{type:"primary",onClick:()=>{if(0===b.length||!C.current)return void i.warning("请先上传一张图片");a(!0);const e=C.current,s=e.getContext("2d");if(!s)return void a(!1);const t=b[0],n=new Image;n.onload=()=>{const t={};y.forEach(a=>{if(e.width=a,e.height=a,!document.createElement("canvas").getContext("2d"))return;const r=Math.min(n.width,n.height),i=(n.width-r)/2,l=(n.height-r)/2;s.clearRect(0,0,a,a),s.drawImage(n,i,l,r,r,0,0,a,a),t[a]=e.toDataURL("image/png")}),d(t),a(!1),i.success("图标生成成功！")},n.onerror=()=>{a(!1),i.error("图片加载失败，请重试")},n.src=t.url||""},loading:e,disabled:0===b.length,children:"生成Favicon图标"})})]})}),(0,u.jsx)(m,{xs:24,lg:12,children:(0,u.jsx)(s,{title:"生成的图标",className:"h-full",children:e?(0,u.jsxs)("div",{className:"flex items-center justify-center h-80",children:[(0,u.jsx)(r,{}),(0,u.jsx)(p,{className:"ml-2",children:"正在生成图标..."})]}):Object.keys(l).length>0?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"grid grid-cols-3 gap-4 mb-4",children:y.map(e=>(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("img",{src:l[e]||void 0,alt:`${e}x${e}`,className:"border border-gray-300 rounded mx-auto",width:2*e,height:2*e}),(0,u.jsxs)(p,{className:"block mt-1",children:[e,"×",e]}),(0,u.jsx)(n,{size:"small",icon:(0,u.jsx)(h,{}),className:"mt-1",onClick:()=>G(e),children:"下载"})]},e))}),(0,u.jsx)("div",{className:"text-center",children:(0,u.jsx)(n,{type:"primary",onClick:()=>{0!==Object.keys(l).length&&(i.info("开始下载所有图标..."),y.forEach(e=>{setTimeout(()=>G(e),100*y.indexOf(e))}))},children:"下载所有图标"})})]}):(0,u.jsx)("div",{className:"flex flex-col items-center justify-center h-80",children:(0,u.jsx)(t,{description:"请先上传图片并生成图标"})})})})]}),(0,u.jsx)("canvas",{ref:C,style:{display:"none"}})]})};export{b as default};