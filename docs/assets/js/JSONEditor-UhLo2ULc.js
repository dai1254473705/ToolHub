import{r as e}from"./rolldown-runtime-Dyt8byMj.js";import{C as s,E as r,G as t,N as a,b as n,m as l,n as i,s as c,t as o}from"./react-BUTozKD7.js";import{E as d,O as u,a as j,j as m}from"./vendor-D3PduJC8.js";import"./monaco-CGyeinCF.js";var p=e(t()),f=e(i()),{Title:x}=c,h=()=>{const[e,t]=(0,p.useState)(""),[i,c]=(0,p.useState)(""),[h,N]=(0,p.useState)(null),v=(0,p.useRef)(null),y=(0,p.useRef)(null);(0,p.useEffect)(()=>{if(!e.trim())return N(null),void c("");try{const s=JSON.parse(e),r=JSON.stringify(s,null,2);c(r),N(!0)}catch(s){N(!1),l.error(`JSON解析错误: ${s instanceof Error?s.message:"未知错误"}`)}},[e]);(0,p.useEffect)(()=>{if(!e.trim())return c(""),void N(null);try{const s=JSON.parse(e),r=JSON.stringify(s,null,2);c(r),N(!0)}catch{N(!1)}},[e]);return(0,f.jsxs)("div",{className:"json-editor-container",children:[(0,f.jsx)(x,{level:4,children:"JSON格式化工具"}),(0,f.jsxs)("div",{className:"json-editor-grid",children:[(0,f.jsxs)(r,{title:"JSON输入",extra:(0,f.jsxs)(n,{children:[(0,f.jsx)(a,{type:!0===h?"primary":"default",icon:(0,f.jsx)(m,{}),onClick:()=>{t(""),c(""),N(null),v.current&&v.current.focus()},children:"清除"}),(0,f.jsx)(a,{type:"primary",icon:(0,f.jsx)(j,{}),onClick:()=>{y.current&&y.current.click()},children:"上传"}),(0,f.jsx)("input",{ref:y,type:"file",accept:".json",style:{display:"none"},onChange:e=>{const s=e.target.files?.[0];if(!s)return;const r=new FileReader;r.onload=e=>{const s=e.target?.result;t(s);try{const e=JSON.parse(s),r=JSON.stringify(e,null,2);c(r),N(!0)}catch{N(!1)}},r.readAsText(s),e.target&&(e.target.value="")}})]}),className:!1===h?"error-card":"",children:[(0,f.jsx)("textarea",{ref:v,value:e,onChange:e=>t(e.target.value),placeholder:"请在此粘贴JSON内容...",className:"json-input"}),!1===h&&(0,f.jsx)("div",{className:"error-message",children:"JSON格式错误，请检查输入内容"})]}),(0,f.jsx)(s,{type:"vertical",className:"divider"}),(0,f.jsx)(r,{title:"格式化结果",extra:(0,f.jsxs)(n,{children:[(0,f.jsx)(a,{icon:(0,f.jsx)(u,{}),onClick:()=>{i&&navigator.clipboard.writeText(i).then(()=>{l.success("已复制到剪贴板")})},disabled:!i,children:"复制"}),(0,f.jsx)(a,{icon:(0,f.jsx)(d,{}),onClick:()=>{if(!i)return;const e=new Blob([i],{type:"application/json"}),s=URL.createObjectURL(e),r=document.createElement("a");r.href=s,r.download="formatted.json",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s)},disabled:!i,children:"下载"})]}),className:"preview-card",children:i?(0,f.jsx)(o,{height:"400px",defaultLanguage:"json",value:i,options:{readOnly:!0,minimap:{enabled:!0},lineNumbers:"on",scrollBeyondLastLine:!1,fontSize:14,theme:"vs-light"}}):(0,f.jsx)("div",{className:"empty-state",children:"格式化后的JSON将显示在这里"})})]})]})};export{h as default};