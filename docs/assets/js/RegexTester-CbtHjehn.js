import{i as e}from"./rolldown-runtime-tH7qxucP.js";import{D as s,E as r,O as l,W as t,g as i,l as o,r as n,x as c}from"./antd-_Zl8gVdI.js";import{E as d,T as a}from"./react-BimuKvkN.js";import{C as x,T as h}from"./vendor-ClqHxgW3.js";var g=e(t()),m=e(a()),{Title:j,Text:T}=n,{TextArea:f}=i,p=()=>{const{t:e}=d(),[t,n]=(0,g.useState)(""),[a,p]=(0,g.useState)("g"),[u,v]=(0,g.useState)(""),[y,N]=(0,g.useState)(""),[b,S]=(0,g.useState)([]);(0,g.useEffect)(()=>{if(!t)return S([]),void N("");try{const e=new RegExp(t,a),s=u||"";if(a.includes("g")){const r=[];let l;for(;null!==(l=e.exec(s));)r.push({index:r.length,match:l[0]||"",start:l.index||0,end:(l.index||0)+(l[0]?.length||0)}),l.index===e.lastIndex&&e.lastIndex++;S(r)}else{const r=e.exec(s);r&&r[0]?S([{index:0,match:r[0],start:r.index||0,end:(r.index||0)+r[0].length}]):S([])}N("")}catch(s){N(s instanceof Error?s.message:e("tools.regexTester.messages.invalidRegex")),S([])}},[t,a,u]);const w=e=>{a.includes(e)?p(a.replace(e,"")):p(a+e)},C=(0,g.useMemo)(()=>{if(!u||0===b.length)return u;let e=u,s=0;return b.forEach(({start:r,end:l})=>{const t=e.slice(0,r+s),i=e.slice(r+s,l+s),o=e.slice(l+s);e=t+`<mark class="match-highlight">${i}</mark>`+o,s+=37}),e},[u,b]);return(0,m.jsxs)("div",{className:"regex-tester",children:[(0,m.jsx)(j,{level:2,children:e("tools.regexTester.title")}),(0,m.jsx)(T,{type:"secondary",children:e("tools.regexTester.description")}),(0,m.jsx)(l,{className:"tool-card",bordered:!1,children:(0,m.jsxs)(c,{direction:"vertical",size:"large",style:{width:"100%"},children:[(0,m.jsxs)("div",{children:[(0,m.jsx)(T,{strong:!0,children:e("tools.regexTester.pattern.label")}),(0,m.jsx)(i,{value:t,onChange:e=>n(e.target.value),placeholder:e("tools.regexTester.pattern.placeholder"),prefix:"/",suffix:a?`/${a}`:"",style:{marginTop:8,fontFamily:"JetBrains Mono, monospace"}}),y&&(0,m.jsxs)("div",{className:"error-message",children:[(0,m.jsx)(x,{})," ",y]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)(T,{strong:!0,children:e("tools.regexTester.flags.label")}),(0,m.jsxs)("div",{className:"flags-section",children:[(0,m.jsxs)(s,{checked:a.includes("g"),onChange:()=>w("g"),children:[(0,m.jsx)(T,{code:!0,children:"g"})," - ",e("tools.regexTester.flags.g")]}),(0,m.jsxs)(s,{checked:a.includes("i"),onChange:()=>w("i"),children:[(0,m.jsx)(T,{code:!0,children:"i"})," - ",e("tools.regexTester.flags.i")]}),(0,m.jsxs)(s,{checked:a.includes("m"),onChange:()=>w("m"),children:[(0,m.jsx)(T,{code:!0,children:"m"})," - ",e("tools.regexTester.flags.m")]}),(0,m.jsxs)(s,{checked:a.includes("s"),onChange:()=>w("s"),children:[(0,m.jsx)(T,{code:!0,children:"s"})," - ",e("tools.regexTester.flags.s")]})]})]}),(0,m.jsxs)(o,{gutter:[16,16],children:[(0,m.jsx)(r,{xs:24,md:12,children:(0,m.jsxs)("div",{children:[(0,m.jsx)(T,{strong:!0,children:e("tools.regexTester.testString.label")}),(0,m.jsx)(f,{value:u,onChange:e=>v(e.target.value),placeholder:e("tools.regexTester.testString.placeholder"),rows:10,style:{marginTop:8}})]})}),(0,m.jsx)(r,{xs:24,md:12,children:(0,m.jsxs)("div",{children:[(0,m.jsx)(T,{strong:!0,children:e("tools.regexTester.matches.title",{count:b.length})}),b.length>0?(0,m.jsx)("div",{className:"matches-list",children:b.map(({index:s,match:r,start:l,end:t})=>(0,m.jsxs)("div",{className:"match-item",children:[(0,m.jsxs)("div",{className:"match-header",children:[(0,m.jsx)(h,{style:{color:"#10b981"}}),(0,m.jsx)(T,{strong:!0,children:e("tools.regexTester.matches.match",{index:s+1})}),(0,m.jsx)(T,{type:"secondary",children:e("tools.regexTester.matches.position",{start:l,end:t})})]}),(0,m.jsx)("div",{className:"match-content",children:(0,m.jsx)(T,{code:!0,children:r})})]},s))}):(0,m.jsx)("div",{className:"no-matches",children:e(t?"tools.regexTester.matches.empty":"tools.regexTester.matches.emptyPattern")})]})})]}),b.length>0&&(0,m.jsxs)("div",{children:[(0,m.jsx)(T,{strong:!0,children:e("tools.regexTester.highlight")}),(0,m.jsx)("div",{className:"highlight-preview",dangerouslySetInnerHTML:{__html:C}})]})]})}),(0,m.jsxs)(l,{className:"info-card",bordered:!1,children:[(0,m.jsx)(j,{level:4,children:e("tools.regexTester.info.common.title")}),(0,m.jsxs)("ul",{children:[(0,m.jsxs)("li",{children:[(0,m.jsx)(T,{code:!0,children:"\\d"})," - ",e("tools.regexTester.info.common.list.digit")]}),(0,m.jsxs)("li",{children:[(0,m.jsx)(T,{code:!0,children:"\\w"})," - ",e("tools.regexTester.info.common.list.word")]}),(0,m.jsxs)("li",{children:[(0,m.jsx)(T,{code:!0,children:"\\s"})," - ",e("tools.regexTester.info.common.list.space")]}),(0,m.jsxs)("li",{children:[(0,m.jsx)(T,{code:!0,children:"."})," - ",e("tools.regexTester.info.common.list.any")]}),(0,m.jsxs)("li",{children:[(0,m.jsx)(T,{code:!0,children:"*"})," - ",e("tools.regexTester.info.common.list.zeroOrMore")]}),(0,m.jsxs)("li",{children:[(0,m.jsx)(T,{code:!0,children:"+"})," - ",e("tools.regexTester.info.common.list.oneOrMore")]}),(0,m.jsxs)("li",{children:[(0,m.jsx)(T,{code:!0,children:"?"})," - ",e("tools.regexTester.info.common.list.zeroOrOne")]}),(0,m.jsxs)("li",{children:[(0,m.jsx)(T,{code:!0,children:"[abc]"})," - ",e("tools.regexTester.info.common.list.range")]}),(0,m.jsxs)("li",{children:[(0,m.jsx)(T,{code:!0,children:"(abc|def)"})," - ",e("tools.regexTester.info.common.list.group")]})]}),(0,m.jsx)(j,{level:4,style:{marginTop:16},children:e("tools.regexTester.info.examples.title")}),(0,m.jsxs)("ul",{children:[(0,m.jsxs)("li",{children:[e("tools.regexTester.info.examples.list.email"),": ",(0,m.jsx)(T,{code:!0,children:"^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$"})]}),(0,m.jsxs)("li",{children:[e("tools.regexTester.info.examples.list.phone"),": ",(0,m.jsx)(T,{code:!0,children:"^1[3-9]\\d{9}$"})]}),(0,m.jsxs)("li",{children:[e("tools.regexTester.info.examples.list.ip"),": ",(0,m.jsx)(T,{code:!0,children:"^(\\d{1,3}\\.){3}\\d{1,3}$"})]}),(0,m.jsxs)("li",{children:[e("tools.regexTester.info.examples.list.url"),": ",(0,m.jsx)(T,{code:!0,children:"^https?://[^\\s]+$"})]})]})]})]})};export{p as default};