import{i as e}from"./rolldown-runtime-tH7qxucP.js";import{D as s,E as r,G as t,O as l,g as n,l as i,r as o,x as c,z as a}from"./antd-DHjKV_bb.js";import{E as d,T as x}from"./react-DF9HAzp0.js";import{D as h,T as g}from"./vendor-C33QSf7L.js";var m=e(t()),j=e(x()),{Title:p,Text:f}=o,{TextArea:T}=n,u=()=>{const{t:e}=d(),[t,o]=(0,m.useState)(""),[x,u]=(0,m.useState)("g"),[v,y]=(0,m.useState)(""),[N,S]=(0,m.useState)(""),[b,k]=(0,m.useState)([]),w=(0,m.useMemo)(()=>{const s=e("tools.regexTester.info.examples.list",{returnObjects:!0});return Object.values(s).map(e=>({name:e.name,pattern:e.pattern,flags:e.flags,testString:e.testString}))},[e]);(0,m.useEffect)(()=>{if(!t)return k([]),void S("");try{const e=new RegExp(t,x),s=v||"";if(x.includes("g")){const r=[];let t;for(;null!==(t=e.exec(s));)r.push({index:r.length,match:t[0]||"",start:t.index||0,end:(t.index||0)+(t[0]?.length||0)}),t.index===e.lastIndex&&e.lastIndex++;k(r)}else{const r=e.exec(s);r&&r[0]?k([{index:0,match:r[0],start:r.index||0,end:(r.index||0)+r[0].length}]):k([])}S("")}catch(s){S(s instanceof Error?s.message:e("tools.regexTester.messages.invalidRegex")),k([])}},[t,x,v]);const z=e=>{x.includes(e)?u(x.replace(e,"")):u(x+e)},C=(0,m.useMemo)(()=>{if(!v||0===b.length)return v;let e=v,s=0;return b.forEach(({start:r,end:t})=>{const l=e.slice(0,r+s),n=e.slice(r+s,t+s),i=e.slice(t+s);e=l+`<mark class="match-highlight">${n}</mark>`+i,s+=37}),e},[v,b]);return(0,j.jsxs)("div",{className:"regex-tester",children:[(0,j.jsx)(p,{level:2,children:e("tools.regexTester.title")}),(0,j.jsx)(f,{type:"secondary",children:e("tools.regexTester.description")}),(0,j.jsx)(l,{className:"tool-card",bordered:!1,children:(0,j.jsxs)(c,{direction:"vertical",size:"large",style:{width:"100%"},children:[(0,j.jsxs)("div",{children:[(0,j.jsx)(f,{strong:!0,children:e("tools.regexTester.pattern.label")}),(0,j.jsx)(n,{value:t,onChange:e=>o(e.target.value),placeholder:e("tools.regexTester.pattern.placeholder"),prefix:"/",suffix:x?`/${x}`:"",style:{marginTop:8,fontFamily:"JetBrains Mono, monospace"}}),N&&(0,j.jsxs)("div",{className:"error-message",children:[(0,j.jsx)(g,{})," ",N]})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)(f,{strong:!0,children:e("tools.regexTester.flags.label")}),(0,j.jsxs)("div",{className:"flags-section",children:[(0,j.jsxs)(s,{checked:x.includes("g"),onChange:()=>z("g"),children:[(0,j.jsx)(f,{code:!0,children:"g"})," - ",e("tools.regexTester.flags.g")]}),(0,j.jsxs)(s,{checked:x.includes("i"),onChange:()=>z("i"),children:[(0,j.jsx)(f,{code:!0,children:"i"})," - ",e("tools.regexTester.flags.i")]}),(0,j.jsxs)(s,{checked:x.includes("m"),onChange:()=>z("m"),children:[(0,j.jsx)(f,{code:!0,children:"m"})," - ",e("tools.regexTester.flags.m")]}),(0,j.jsxs)(s,{checked:x.includes("s"),onChange:()=>z("s"),children:[(0,j.jsx)(f,{code:!0,children:"s"})," - ",e("tools.regexTester.flags.s")]})]})]}),(0,j.jsxs)(i,{gutter:[16,16],children:[(0,j.jsx)(r,{xs:24,md:12,children:(0,j.jsxs)("div",{children:[(0,j.jsx)(f,{strong:!0,children:e("tools.regexTester.testString.label")}),(0,j.jsx)(T,{value:v,onChange:e=>y(e.target.value),placeholder:e("tools.regexTester.testString.placeholder"),rows:5,style:{marginTop:8,resize:"vertical"}})]})}),(0,j.jsx)(r,{xs:24,md:12,children:(0,j.jsxs)("div",{children:[(0,j.jsx)(f,{strong:!0,children:e("tools.regexTester.matches.title",{count:b.length})}),b.length>0?(0,j.jsx)("div",{className:"matches-list",children:b.map(({index:s,match:r,start:t,end:l})=>(0,j.jsxs)("div",{className:"match-item",children:[(0,j.jsxs)("div",{className:"match-header",children:[(0,j.jsx)(h,{style:{color:"#10b981"}}),(0,j.jsx)(f,{strong:!0,children:e("tools.regexTester.matches.match",{index:s+1})}),(0,j.jsx)(f,{type:"secondary",children:e("tools.regexTester.matches.position",{start:t,end:l})})]}),(0,j.jsx)("div",{className:"match-content",children:(0,j.jsx)(f,{code:!0,children:r})})]},s))}):(0,j.jsx)("div",{className:"no-matches",children:e(t?"tools.regexTester.matches.empty":"tools.regexTester.matches.emptyPattern")})]})})]}),b.length>0&&(0,j.jsxs)("div",{children:[(0,j.jsx)(f,{strong:!0,children:e("tools.regexTester.highlight")}),(0,j.jsx)("div",{className:"highlight-preview",dangerouslySetInnerHTML:{__html:C}})]})]})}),(0,j.jsxs)(l,{className:"info-card",bordered:!1,children:[(0,j.jsx)(p,{level:4,children:e("tools.regexTester.info.common.title")}),(0,j.jsxs)("ul",{children:[(0,j.jsxs)("li",{children:[(0,j.jsx)(f,{code:!0,children:"\\d"})," - ",e("tools.regexTester.info.common.list.digit")]}),(0,j.jsxs)("li",{children:[(0,j.jsx)(f,{code:!0,children:"\\w"})," - ",e("tools.regexTester.info.common.list.word")]}),(0,j.jsxs)("li",{children:[(0,j.jsx)(f,{code:!0,children:"\\s"})," - ",e("tools.regexTester.info.common.list.space")]}),(0,j.jsxs)("li",{children:[(0,j.jsx)(f,{code:!0,children:"."})," - ",e("tools.regexTester.info.common.list.any")]}),(0,j.jsxs)("li",{children:[(0,j.jsx)(f,{code:!0,children:"*"})," - ",e("tools.regexTester.info.common.list.zeroOrMore")]}),(0,j.jsxs)("li",{children:[(0,j.jsx)(f,{code:!0,children:"+"})," - ",e("tools.regexTester.info.common.list.oneOrMore")]}),(0,j.jsxs)("li",{children:[(0,j.jsx)(f,{code:!0,children:"?"})," - ",e("tools.regexTester.info.common.list.zeroOrOne")]}),(0,j.jsxs)("li",{children:[(0,j.jsx)(f,{code:!0,children:"[abc]"})," - ",e("tools.regexTester.info.common.list.range")]}),(0,j.jsxs)("li",{children:[(0,j.jsx)(f,{code:!0,children:"(abc|def)"})," - ",e("tools.regexTester.info.common.list.group")]})]}),(0,j.jsx)(p,{level:4,style:{marginTop:24},children:e("tools.regexTester.info.examples.title")}),(0,j.jsx)("div",{className:"examples-grid",children:w.map((s,r)=>(0,j.jsxs)("div",{className:"example-item",children:[(0,j.jsxs)("div",{className:"example-header",children:[(0,j.jsx)(f,{strong:!0,children:s.name}),(0,j.jsx)(a,{type:"primary",size:"small",onClick:()=>(e=>{o(e.pattern),u(e.flags),y(e.testString)})(s),children:e("tools.regexTester.info.examples.apply")})]}),(0,j.jsx)("div",{className:"example-content",children:(0,j.jsxs)(f,{code:!0,style:{fontSize:"12px"},children:["/",s.pattern,"/",s.flags]})})]},r))})]})]})};export{u as default};