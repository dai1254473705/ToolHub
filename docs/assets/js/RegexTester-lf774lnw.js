import{r as e}from"./rolldown-runtime-Dyt8byMj.js";import{E as s,G as c,T as l,_ as d,b as n,n as i,s as r,u as h,w as a}from"./react-BUTozKD7.js";import{j as t,k as x}from"./vendor-D1kXU7B4.js";var o=e(c()),j=e(i()),{Title:m,Text:g}=r,{TextArea:u}=d,v=()=>{const[e,c]=(0,o.useState)(""),[i,r]=(0,o.useState)("g"),[v,f]=(0,o.useState)(""),[p,y]=(0,o.useState)(""),[N,b]=(0,o.useState)([]);(0,o.useEffect)(()=>{if(!e)return b([]),void y("");try{const s=new RegExp(e,i),c=v||"";if(i.includes("g")){const e=[];let l;for(;null!==(l=s.exec(c));)e.push({index:e.length,match:l[0]||"",start:l.index||0,end:(l.index||0)+(l[0]?.length||0)}),l.index===s.lastIndex&&s.lastIndex++;b(e)}else{const e=s.exec(c);e&&e[0]?b([{index:0,match:e[0],start:e.index||0,end:(e.index||0)+e[0].length}]):b([])}y("")}catch(s){y(s instanceof Error?s.message:"无效的正则表达式"),b([])}},[e,i,v]);const T=e=>{i.includes(e)?r(i.replace(e,"")):r(i+e)},k=(0,o.useMemo)(()=>{if(!v||0===N.length)return v;let e=v,s=0;return N.forEach(({start:c,end:l})=>{const d=e.slice(0,c+s),n=e.slice(c+s,l+s),i=e.slice(l+s);e=d+`<mark class="match-highlight">${n}</mark>`+i,s+=37}),e},[v,N]);return(0,j.jsxs)("div",{className:"regex-tester",children:[(0,j.jsx)(m,{level:2,children:"正则表达式测试"}),(0,j.jsx)(g,{type:"secondary",children:"实时测试正则表达式，查看匹配结果"}),(0,j.jsx)(s,{className:"tool-card",bordered:!1,children:(0,j.jsxs)(n,{direction:"vertical",size:"large",style:{width:"100%"},children:[(0,j.jsxs)("div",{children:[(0,j.jsx)(g,{strong:!0,children:"正则表达式"}),(0,j.jsx)(d,{value:e,onChange:e=>c(e.target.value),placeholder:"例如: \\d+",prefix:"/",suffix:i?`/${i}`:"",style:{marginTop:8,fontFamily:"JetBrains Mono, monospace"}}),p&&(0,j.jsxs)("div",{className:"error-message",children:[(0,j.jsx)(x,{})," ",p]})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)(g,{strong:!0,children:"标志位"}),(0,j.jsxs)("div",{className:"flags-section",children:[(0,j.jsxs)(l,{checked:i.includes("g"),onChange:()=>T("g"),children:[(0,j.jsx)(g,{code:!0,children:"g"})," - 全局匹配"]}),(0,j.jsxs)(l,{checked:i.includes("i"),onChange:()=>T("i"),children:[(0,j.jsx)(g,{code:!0,children:"i"})," - 忽略大小写"]}),(0,j.jsxs)(l,{checked:i.includes("m"),onChange:()=>T("m"),children:[(0,j.jsx)(g,{code:!0,children:"m"})," - 多行模式"]}),(0,j.jsxs)(l,{checked:i.includes("s"),onChange:()=>T("s"),children:[(0,j.jsx)(g,{code:!0,children:"s"})," - 点号匹配换行符"]})]})]}),(0,j.jsxs)(h,{gutter:[16,16],children:[(0,j.jsx)(a,{xs:24,md:12,children:(0,j.jsxs)("div",{children:[(0,j.jsx)(g,{strong:!0,children:"测试文本"}),(0,j.jsx)(u,{value:v,onChange:e=>f(e.target.value),placeholder:"输入要测试的文本",rows:10,style:{marginTop:8}})]})}),(0,j.jsx)(a,{xs:24,md:12,children:(0,j.jsxs)("div",{children:[(0,j.jsxs)(g,{strong:!0,children:["匹配结果 (",N.length,")"]}),N.length>0?(0,j.jsx)("div",{className:"matches-list",children:N.map(({index:e,match:s,start:c,end:l})=>(0,j.jsxs)("div",{className:"match-item",children:[(0,j.jsxs)("div",{className:"match-header",children:[(0,j.jsx)(t,{style:{color:"#10b981"}}),(0,j.jsxs)(g,{strong:!0,children:["匹配 ",e+1]}),(0,j.jsxs)(g,{type:"secondary",children:["位置: ",c," - ",l]})]}),(0,j.jsx)("div",{className:"match-content",children:(0,j.jsx)(g,{code:!0,children:s})})]},e))}):(0,j.jsx)("div",{className:"no-matches",children:e?"无匹配结果":"请输入正则表达式"})]})})]}),N.length>0&&(0,j.jsxs)("div",{children:[(0,j.jsx)(g,{strong:!0,children:"高亮预览"}),(0,j.jsx)("div",{className:"highlight-preview",dangerouslySetInnerHTML:{__html:k}})]})]})}),(0,j.jsxs)(s,{className:"info-card",bordered:!1,children:[(0,j.jsx)(m,{level:4,children:"常用正则表达式"}),(0,j.jsxs)("ul",{children:[(0,j.jsxs)("li",{children:[(0,j.jsx)(g,{code:!0,children:"\\d"})," - 匹配数字"]}),(0,j.jsxs)("li",{children:[(0,j.jsx)(g,{code:!0,children:"\\w"})," - 匹配字母、数字、下划线"]}),(0,j.jsxs)("li",{children:[(0,j.jsx)(g,{code:!0,children:"\\s"})," - 匹配空白字符"]}),(0,j.jsxs)("li",{children:[(0,j.jsx)(g,{code:!0,children:"."})," - 匹配任意字符（除换行符）"]}),(0,j.jsxs)("li",{children:[(0,j.jsx)(g,{code:!0,children:"*"})," - 匹配 0 次或多次"]}),(0,j.jsxs)("li",{children:[(0,j.jsx)(g,{code:!0,children:"+"})," - 匹配 1 次或多次"]}),(0,j.jsxs)("li",{children:[(0,j.jsx)(g,{code:!0,children:"?"})," - 匹配 0 次或 1 次"]}),(0,j.jsxs)("li",{children:[(0,j.jsx)(g,{code:!0,children:"[abc]"})," - 匹配 a、b 或 c"]}),(0,j.jsxs)("li",{children:[(0,j.jsx)(g,{code:!0,children:"(abc|def)"})," - 匹配 abc 或 def"]})]}),(0,j.jsx)(m,{level:4,style:{marginTop:16},children:"实用示例"}),(0,j.jsxs)("ul",{children:[(0,j.jsxs)("li",{children:["邮箱: ",(0,j.jsx)(g,{code:!0,children:"^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$"})]}),(0,j.jsxs)("li",{children:["手机号: ",(0,j.jsx)(g,{code:!0,children:"^1[3-9]\\d{9}$"})]}),(0,j.jsxs)("li",{children:["IP地址: ",(0,j.jsx)(g,{code:!0,children:"^(\\d{1,3}\\.){3}\\d{1,3}$"})]}),(0,j.jsxs)("li",{children:["URL: ",(0,j.jsx)(g,{code:!0,children:"^https?://[^\\s]+$"})]})]})]})]})};export{v as default};