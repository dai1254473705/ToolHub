import{i as t}from"./rolldown-runtime-tH7qxucP.js";import{A as e,F as o,L as s,N as i,O as r,R as l,W as a,a as d,c as n,d as c,f as m,g as p,k as h,m as x,o as u,r as j,v as g,x as y}from"./antd-_Zl8gVdI.js";import{E as f,T as L}from"./react-BimuKvkN.js";import{C as w,T as b,a as v}from"./vendor-ClqHxgW3.js";var N=t(a());let I=function(t){return t.LOW="low",t.MEDIUM="medium",t.HIGH="high",t}({});var C=t(L()),{Text:D,Paragraph:E}=j,T=({todo:t,onToggleComplete:e,onEdit:o,onDelete:s})=>{const{t:i}=f();return(0,C.jsx)(r,{className:"todo-item-card mb-4 hover:shadow-md transition-shadow "+(t.completed?"opacity-70":""),extra:(0,C.jsxs)(y,{size:"small",children:[(0,C.jsx)(l,{type:"text",icon:t.completed?(0,C.jsx)(w,{}):(0,C.jsx)(b,{}),onClick:()=>e(t.id),title:t.completed?i("tools.todoList.item.markUncomplete"):i("tools.todoList.item.markComplete")}),(0,C.jsx)(l,{type:"text",icon:(0,C.jsx)(d,{}),onClick:()=>o(t),title:i("tools.todoList.item.edit")}),(0,C.jsx)(c,{title:i("tools.todoList.item.deleteConfirm"),onConfirm:()=>s(t.id),okText:i("common.confirm"),cancelText:i("common.cancel"),children:(0,C.jsx)(l,{type:"text",danger:!0,icon:(0,C.jsx)(u,{}),title:i("tools.todoList.item.delete")})})]}),children:(0,C.jsx)("div",{className:"flex items-start justify-between",children:(0,C.jsxs)("div",{className:"flex-1",children:[(0,C.jsxs)("div",{className:"flex items-center mb-2",children:[(0,C.jsx)(D,{strong:!0,className:t.completed?"line-through":"",children:t.title}),(0,C.jsx)(n,{color:(t=>{switch(t){case I.HIGH:return"red";case I.MEDIUM:return"orange";case I.LOW:return"green";default:return"blue"}})(t.priority),className:"ml-2",children:(t=>{switch(t){case I.HIGH:return i("tools.todoList.form.priorities.high");case I.MEDIUM:return i("tools.todoList.form.priorities.medium");case I.LOW:return i("tools.todoList.form.priorities.low");default:return i("tools.todoList.form.priorities.medium")}})(t.priority)})]}),t.description&&(0,C.jsx)(E,{className:"mb-2 "+(t.completed?"line-through":""),children:t.description}),(0,C.jsxs)(D,{type:"secondary",className:"text-xs",children:[i("tools.todoList.item.created"),new Date(t.createdAt).toLocaleString()]}),t.updatedAt!==t.createdAt&&(0,C.jsxs)(D,{type:"secondary",className:"text-xs ml-2",children:[i("tools.todoList.item.updated"),new Date(t.updatedAt).toLocaleString()]})]})})})},{TextArea:k}=p,{Option:A}=o,F=({visible:t,todo:e,onCancel:s,onSubmit:i})=>{const{t:r}=f(),[a]=g.useForm();N.useEffect(()=>{t&&(e?a.setFieldsValue({title:e.title,description:e.description,priority:e.priority}):a.resetFields())},[t,e,a]);return(0,C.jsx)(m,{title:r(e?"tools.todoList.edit":"tools.todoList.add"),open:t,onCancel:s,footer:null,children:(0,C.jsxs)(g,{form:a,layout:"vertical",className:"mt-2",children:[(0,C.jsx)(g.Item,{name:"title",label:r("tools.todoList.form.title"),rules:[{required:!0,message:r("tools.todoList.form.required")}],children:(0,C.jsx)(p,{placeholder:r("tools.todoList.form.titlePlaceholder")})}),(0,C.jsx)(g.Item,{name:"description",label:r("tools.todoList.form.desc"),children:(0,C.jsx)(k,{rows:4,placeholder:r("tools.todoList.form.descPlaceholder")})}),(0,C.jsx)(g.Item,{name:"priority",label:r("tools.todoList.form.priority"),initialValue:I.MEDIUM,rules:[{required:!0,message:r("tools.todoList.form.priorityPlaceholder")}],children:(0,C.jsxs)(o,{placeholder:r("tools.todoList.form.priorityPlaceholder"),children:[(0,C.jsx)(A,{value:I.LOW,children:r("tools.todoList.form.priorities.low")}),(0,C.jsx)(A,{value:I.MEDIUM,children:r("tools.todoList.form.priorities.medium")}),(0,C.jsx)(A,{value:I.HIGH,children:r("tools.todoList.form.priorities.high")})]})}),(0,C.jsxs)(g.Item,{className:"text-right",children:[(0,C.jsx)(l,{onClick:s,className:"mr-2",children:r("common.cancel")}),(0,C.jsx)(l,{type:"primary",onClick:()=>{a.validateFields().then(t=>{i(t),a.resetFields()})},children:r(e?"tools.todoList.update":"tools.todoList.add")})]})]})})},M=t(v());M.default.config({name:"ToolHub",storeName:"todolist"});var S="todo_items";const H=async()=>{try{return await M.default.getItem(S)||[]}catch(t){return console.error("Error getting todos:",t),[]}},O=async(t,e)=>{try{const o=await H(),s=o.findIndex(e=>e.id===t);return-1===s?null:(o[s]={...o[s],...e,updatedAt:new Date},await M.default.setItem(S,o),o[s])}catch(o){throw console.error("Error updating todo:",o),o}};var{Title:P}=j,{TabPane:U}=h,W=()=>{const{t:t}=f(),[o,r]=(0,N.useState)([]),[a,d]=(0,N.useState)(!0),[n,c]=(0,N.useState)(!1),[m,p]=(0,N.useState)(void 0),[u,j]=(0,N.useState)("all"),g=async()=>{d(!0);try{const t=await H();t.sort((t,e)=>new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime()),r(t)}catch(t){console.error("Failed to load todos:",t)}finally{d(!1)}};(0,N.useEffect)(()=>{g()},[]);const L=async t=>{try{await(async t=>{try{const e=await H(),o=e.filter(e=>e.id!==t);return e.length!==o.length&&(await M.default.setItem(S,o),!0)}catch(e){throw console.error("Error deleting todo:",e),e}})(t),await g()}catch(e){console.error("Failed to delete todo:",e)}},w=async t=>{try{const e=o.find(e=>e.id===t);e&&(await O(t,{completed:!e.completed}),await g())}catch(e){console.error("Failed to toggle todo status:",e)}},b=t=>{p(t),c(!0)},v=o.filter(t=>"all"===u||("completed"===u?t.completed:"pending"!==u||!t.completed)),I=o.length,D=o.filter(t=>t.completed).length,E=I-D;return(0,C.jsxs)("div",{className:"todo-list-page",children:[(0,C.jsxs)("div",{className:"mb-6",children:[(0,C.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,C.jsx)(P,{level:2,children:t("tools.todoList.title")}),(0,C.jsx)(l,{type:"primary",icon:(0,C.jsx)(e,{}),onClick:()=>c(!0),children:t("tools.todoList.add")})]}),(0,C.jsxs)(y,{className:"mb-4",children:[(0,C.jsx)(i,{count:I,children:(0,C.jsx)("span",{className:"px-2 py-1 rounded bg-gray-100 dark:bg-gray-800",children:t("tools.todoList.total")})}),(0,C.jsx)(i,{count:E,color:"blue",children:(0,C.jsx)("span",{className:"px-2 py-1 rounded bg-gray-100 dark:bg-gray-800",children:t("tools.todoList.pending")})}),(0,C.jsx)(i,{count:D,color:"green",children:(0,C.jsx)("span",{className:"px-2 py-1 rounded bg-gray-100 dark:bg-gray-800",children:t("tools.todoList.completed")})})]})]}),(0,C.jsxs)(h,{activeKey:u,onChange:j,className:"mb-4",children:[(0,C.jsx)(U,{tab:t("tools.todoList.tabs.all"),children:a?(0,C.jsx)("div",{className:"text-center py-10",children:(0,C.jsx)(x,{size:"large"})}):0===v.length?(0,C.jsx)(s,{description:t("tools.todoList.empty.all")}):(0,C.jsx)("div",{className:"todo-items-list",children:v.map(t=>(0,C.jsx)(T,{todo:t,onToggleComplete:w,onEdit:b,onDelete:L},t.id))})},"all"),(0,C.jsx)(U,{tab:t("tools.todoList.tabs.pending"),children:a?(0,C.jsx)("div",{className:"text-center py-10",children:(0,C.jsx)(x,{size:"large"})}):0===v.length?(0,C.jsx)(s,{description:t("tools.todoList.empty.pending")}):(0,C.jsx)("div",{className:"todo-items-list",children:v.map(t=>(0,C.jsx)(T,{todo:t,onToggleComplete:w,onEdit:b,onDelete:L},t.id))})},"pending"),(0,C.jsx)(U,{tab:t("tools.todoList.tabs.completed"),children:a?(0,C.jsx)("div",{className:"text-center py-10",children:(0,C.jsx)(x,{size:"large"})}):0===v.length?(0,C.jsx)(s,{description:t("tools.todoList.empty.completed")}):(0,C.jsx)("div",{className:"todo-items-list",children:v.map(t=>(0,C.jsx)(T,{todo:t,onToggleComplete:w,onEdit:b,onDelete:L},t.id))})},"completed")]}),(0,C.jsx)(F,{visible:n,todo:m,onCancel:()=>{c(!1),p(void 0)},onSubmit:m?async t=>{if(m)try{await O(m.id,t),await g(),c(!1),p(void 0)}catch(e){console.error("Failed to update todo:",e)}}:async t=>{try{await(async t=>{try{const e=await H(),o={...t,id:Date.now().toString(),completed:!1,createdAt:new Date,updatedAt:new Date};return e.push(o),await M.default.setItem(S,e),o}catch(e){throw console.error("Error adding todo:",e),e}})(t),await g(),c(!1)}catch(e){console.error("Failed to add todo:",e)}}})]})};export{W as default};